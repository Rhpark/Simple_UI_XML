# Logx Implementation Plan

## 臾몄꽌 ?뺣낫
- 臾몄꽌紐? Logx Implementation Plan
- ?묒꽦?? 2026-01-23
- ???紐⑤뱢: simple_core
- ?⑦궎吏: kr.open.library.simple_ui.core.logcat
- ?곹깭: Draft

## 紐⑺몴
- SPEC 湲곕컲 援ы쁽 ?쒖꽌? 踰붿쐞瑜?紐낇솗???쒕떎.
- ?⑥쐞 ?뚯뒪??+ Robolectric ?뚯뒪?몃? ?ы븿?쒕떎.
- isLogging/isSave/Context 遺?????덉쇅 ?먮쫫???덉쟾?섍쾶 泥섎━?쒕떎.
- ?ㅼ젣 肄붾뱶 援ы쁽? `kr.open.library.simple_ui.core.logcat` ?⑦궎吏 ?댁뿉?쒕쭔 吏꾪뻾?쒕떎.

## 援ы쁽 踰붿쐞
- core(Android 湲곕낯 ?섏〈 ?ы븿: Log, ?뚯씪 I/O)
  - LogType/StorageType ??紐⑤뜽/?곸닔 ?뺤쓽
  - Config 紐⑤뜽 + setter/getter + ?숈떆???뺤콉
  - LogType ALLOWLIST ?꾪꽣, tag BLOCKLIST ?꾪꽣
  - StackTrace 異붿텧湲?(skipPackages prefix 留ㅼ묶)
  - Formatter: 湲곕낯/Parent/Thread/JSON
  - Pipeline: LogxPipeline (?ㅼ??ㅽ듃?덉씠??
  - FileLineBuilder: ?뚯씪 ?쇱씤 ?щ㎎ ?꾨떞
  - Writer: 肄섏넄/?뚯씪
  - 寃쎈줈 怨꾩궛 諛??뚯씪紐??뺤콉
  - 珥덇린??Context 泥섎━ + ?뚯씪 ????쒖뼱
  - Kotlin ?뺤옣 ?⑥닔

## 援ы쁽 ?쒖꽌
1. 紐⑤뜽/?곸닔 ?뺤쓽
   - LogType(VERBOSE/DEBUG/INFO/WARN/ERROR/PARENT/JSON/THREAD)
   - StorageType(INTERNAL/APP_EXTERNAL/PUBLIC_EXTERNAL)
   - LogType 留ㅽ븨??v/d/i/w/e/p/j/t) 諛?{type} 1湲??異쒕젰 洹쒖튃
2. Config ?ㅺ퀎/愿由?   - 湲곕낯媛?湲곕낯 ?덉슜 ??? isLogging/isSave ??
   - setter/getter (諛⑹뼱??蹂듭궗)
   - ?숈떆?? @Volatile (?⑥닚 ?꾨뱶) + synchronized 諛⑹뼱??蹂듭궗 (而щ젆??
   - ?좏슚??寃?? logTagBlockList 鍮?媛??쒓굅 + Log.e 1??異쒕젰
   - setAppName ?곗꽑, initialize??appName????뼱?곗? ?딆쓬
   - initialize(context) 蹂닿? + setSaveDirectory ?곗꽑?쒖쐞
   - initialize ?댁쟾 setSaveDirectory ?몄텧 ??寃쎈줈 媛믩쭔 蹂닿??섍퀬, ?붾젆?곕━ ?앹꽦/?뚯씪 ??μ? initialize ?댄썑?먮쭔 ?섑뻾
   - initialize 誘명샇異??곹깭?먯꽌 setSaveEnabled(true) ?몄텧 ??IllegalStateException 泥섎━
3. ?꾪꽣 紐⑤뱢
   - isLogging 寃??   - logTypes ALLOWLIST 寃??(PARENT/JSON/THREAD??DEBUG? ?낅┰)
   - isLogTagBlockListEnabled + logTagBlockList ?곸슜
   - isLogTagBlockListEnabled=false?대㈃ logTagBlockList 臾댁떆
4. StackTrace 異붿텧湲?   - Thread.currentThread().stackTrace 湲곕컲
   - logcat ?대? prefix 留덉?留??꾨젅???ㅼ쓬 ?몃뜳?ㅻ????쒖감 ?먯깋(由ъ뒪???앹꽦 ?놁쓬)
   - ?대? prefix媛 ?녾굅??踰붿쐞瑜?踰쀬뼱?섎㈃ fallbackStartIndex = 4遺???먯깋
   - skipPackages prefix 留ㅼ묶?쇰줈 ?대? ?꾨젅???쒓굅
   - ?꾩옱/遺紐??꾨젅??怨꾩궛
   - 湲곕낯 skipPackages 紐⑸줉:
   - kr.open.library.simple_ui.core.logcat
   - java. / kotlin. / kotlinx.coroutines. / kotlin.coroutines
   - android.util. / android.os. / dalvik.system.
   - addSkipPackages濡??뺤옣 媛??   - access$ 硫붿꽌?쒕뒗 ?ㅽ궢, ?뚮떎 ?꾨젅?꾩? file/line ?좏슚?섎㈃ ?덉슜
5. Formatter
   - 湲곕낯 ?щ㎎: prefix + meta + msg
   - p(): ??以??щ㎎(遺紐??꾩옱)
   - t(): TID ?щ㎎
   - j(): JSON ?щ㎎(4移?indent, ?듭뀡 ?놁쓬, ?ㅽ뙣 ???먮Ц)
6. Pipeline / FileLineBuilder
   - LogxPipeline???꾪꽣/?ㅽ깮/?щ㎎/異쒕젰/?뚯씪??μ쓣 ?ㅼ??ㅽ듃?덉씠??   - LogxFileLineBuilder媛 ?뚯씪 ?쇱씤 ?щ㎎ ?앹꽦 ?대떦
7. Writer
   - 肄섏넄: LogType -> android.util.Log 留ㅽ븨 (p/j/t??Log.d() ?ъ슜)
   - 肄섏넄 JSON? ??踰덉쓽 Log ?몄텧濡?硫?곕씪??硫붿떆吏瑜?異쒕젰
   - ?뚯씪: ?앹꽦/?곌린 ?쒖젏?먮쭔 synchronized ?곸슜, 利됱떆 flush
   - ?뚯씪 ?곌린??肄붾（??Dispatchers.IO) ?⑥씪 ?뚮퉬???먮줈 鍮꾨룞湲?泥섎━
   - 硫?곕씪???뚯씪 湲곕줉: p()??紐⑤뱺 以꾩뿉 timestamp, j()??泥?以꾨쭔 timestamp
   - ?뚯씪紐? `{appName}_yyyy_MM_dd__HH-mm-ss-SSS.txt`
   - ?뚯씪 ?ъ궗?? ???寃쎈줈/storageType/appName 蹂寃쎌씠 ?놁쓣 ?뚮쭔 ?숈씪 ?뚯씪 ?좎?
   - ???寃쎈줈/storageType/appName 蹂寃????ㅼ쓬 濡쒓렇?먯꽌 ???뚯씪 ?앹꽦
8. ?뚯씪 ????쒖뼱
   - initialize ?댄썑?먮쭔 ????덉슜
   - Context 誘몄＜???곹깭?먯꽌 setSaveEnabled(true) ?몄텧 ??IllegalStateException
   - setSaveDirectory ?곗꽑, ?놁쑝硫?storageType 寃쎈줈
   - ???寃쎈줈 ?붾젆?곕━ ?먮룞 ?앹꽦, ?ㅽ뙣 ??Log.e 留??쒕룄 寃쎄퀬 ?????以묐떒
- PUBLIC_EXTERNAL + API 28 이하에서 권한 미보유 시 SecurityException
   - isSave false -> true ?꾪솚 ???뚯씪 ?앹꽦/?ъ궗??洹쒖튃 ?곸슜
   - isLogging=false?대㈃ ???以묐떒
   - isSave=false?대㈃ ???以묐떒
   - ?뚮윭???몃━嫄? BufferedWriter ?좎? + 利됱떆 flush (異뷀썑 踰꾪띁留??꾪솚 ???곸슜)
   - ProcessLifecycleOwner濡?諛깃렇?쇱슫???꾪솚 ??writer close (?ㅼ쓬 濡쒓렇 ???ъ삤??
9. Logx 怨듦컻 API
   - v/d/i/w/e: (臾댁씤?? msg, tag+msg)
   - p/j/t: (臾댁씤?? msg, tag+msg)
   - tag null/鍮?媛?泥섎━ (湲몄씠 ?쒗븳 ?놁씠 ?먮Ц 洹몃?濡?異쒕젰)
   - msg null?대㈃ 臾몄옄??"null"濡?泥섎━
   - Throwable ?ㅻ쾭濡쒕뱶??1李?媛쒕컻 踰붿쐞?먯꽌 ?쒖쇅(異뷀썑 異붽? ?덉젙)
10. Kotlin ?뺤옣 ?⑥닔
   - Any.logv/logd/logi/logw/loge/logp/logt ?⑦꽩 援ы쁽
   - String.logj ?⑦꽩 援ы쁽(JSON ?꾩슜)
11. ?뚯뒪??   - ?⑥쐞 ?뚯뒪??+ Robolectric ?뚯뒪???묒꽦

## ?ㅽ뙣 泥섎━ ?뺤콉
- ?섎せ??tag ?낅젰: Log.e 1??異쒕젰 ??tag 臾댁떆
- ?대? 寃쎄퀬/?먮윭 Log.e ?쒓렇: ?낅젰 tag媛 ?덉쑝硫??대떦 tag, ?놁쑝硫?ERROR
- Context 誘몄＜??+ ????쒖꽦?? 肄섏넄 濡쒓렇留?異쒕젰, 寃쎄퀬 1??- JSON ?뚯떛 ?ㅽ뙣: ?먮Ц 異쒕젰
- ?뚯씪 ?곌린 ?ㅽ뙣: ?덉쇅 ?쇳궎怨?肄섏넄 ?먮윭 濡쒓렇 異쒕젰(留ㅻ쾲)
- PUBLIC_EXTERNAL + API 28 이하에서 권한 미보유 시 SecurityException

## ?뚯뒪??踰붿쐞
### ?⑥쐞 ?뚯뒪??- LogType 留ㅽ븨/異쒕젰 洹쒖튃
- Config 湲곕낯媛?Setter/Getter 諛⑹뼱??蹂듭궗
- logTagBlockList 鍮?媛??쒓굅 諛?Log.e 泥섎━
- LogType ?꾪꽣 洹쒖튃(ALLOWLIST)
- StackTrace 異붿텧(?꾩옱/遺紐?
- p() 遺紐??꾨젅???녿뒗 寃쎌슦 ?щ㎎ 寃利?- Formatter(湲곕낯/Parent/Thread/JSON)
- msg null????"null" 臾몄옄??泥섎━ 寃利?- skipPackages ?뺤옣 諛섏쁺
- isLogging=false?먯꽌 肄섏넄/?뚯씪 李⑤떒

### Robolectric ?뚯뒪??- storageType 寃쎈줈 怨꾩궛
- ?뚯씪 ?앹꽦/?ъ궗???뺤콉
- setSaveDirectory ?곗꽑?쒖쐞
- initialize ?댁쟾 setSaveDirectory ?숈옉
- Context 誘몄＜?????李⑤떒
- isSave false -> true ?꾪솚 ???뚯씪 ?앹꽦/?ъ궗??- ?뚯씪 ?곌린 諛섎났 ?ㅽ뙣 ??留ㅻ쾲 ?먮윭 濡쒓렇 異쒕젰 寃利?- PUBLIC_EXTERNAL 권한 미보유 시 SecurityException 동작

## ?뚯뒪???뚯씪 ?꾩튂 媛?대뱶
- ?⑥쐞 ?뚯뒪??
  - `simple_core/src/test/java/kr/open/library/simple_ui/core/unit/logcat/...`
- Robolectric ?뚯뒪??
  - `simple_core/src/test/java/kr/open/library/simple_ui/core/robolectric/logcat/...`

## ?뚯뒪??諛⑸쾿(?섎룞 ?쒕굹由ъ삤)
- isLogging=false?먯꽌 肄섏넄/?뚯씪 紐⑤몢 異쒕젰?섏? ?딅뒗吏 ?뺤씤
- isSave=false?먯꽌 ?뚯씪 誘몄깮???뺤씤
- setSaveDirectory 吏????storageType 蹂寃??쒖뿉??吏??寃쎈줈 ?ъ슜 ?뺤씤
- p/j/t LogType ?꾪꽣 媛쒕퀎 on/off ?뺤씤
- 鍮?tag ?낅젰 ??Log.e 異쒕젰 + tag 臾댁떆 ?뺤씤

## 由ъ뒪??泥댄겕由ъ뒪??- skipPackages 湲곕낯 紐⑸줉 ?곸젅??諛??뺤옣??- ?ㅽ깮 ?꾨젅??異붿텧 ?ㅽ뙣 ???щ㎎ ?덉젙??- ?뚯씪 I/O ??? ?몄텧濡??명븳 ?깅뒫 ???- Application initialize ??대컢 ?꾨씫 ?꾪뿕
- Logcat ?⑥씪 異쒕젰 湲몄씠 ?쒗븳?쇰줈 湲?JSON ?쇰?媛 ?섎┫ ???덉쓬


